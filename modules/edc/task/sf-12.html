<section>
    VmInclude:__COMPONENT__/grid/grid.v3.html
</section>
<script>
    function F__ID(){
        //-------------------------------------
        VmInclude:__COMPONENT__/grid/grid.v3.js

        VmInclude:__CURRENT_PATH__/task.js
        //-------------------------------------
        _task_fields="SF12_1,SF12_2,SF12_3,SF12_4,SF12_5,SF12_6,SF12_7,SF12_8,SF12_9,SF12_10,SF12_11,SF12_12,Vitality|SF12_VI,Physical functioning|SF12_PF,Bodily pain|SF12_BP,General health perceptions|SF12_GHP,Physical role functioning|SF12_PRF,Emotional role functionin|SF12_ERF,Social role functioning|SF12_SRF,Mental health|SF12_MH, Physical health|SF12_PH,Mean mental health|SF12_MHM";
        _fields="_Form|form_module,Status|S2,Notes|NT,Participant,"+_task_fields;
        _fields+=",Submit Date|DateTime,Submitted by|Author,_Delete,_Hidden|Participant_uid";
        //-------------------------------------
        $('#D__ID').on('load',function(){  _set_req(); _request_data(); })
        $('#D__ID').on('back',function(){  _set_req(); _request_data(); })
        //-------------------------------------
        _cell_render=function(records,I,field,td,set_value,source){
            switch(field){
                case 'SF12_PF':
                case 'SF12_PRF':
                case 'SF12_BP':
                case 'SF12_GHP':
                case 'SF12_VI':
                case 'SF12_SRF':
                case 'SF12_ERF':
                case 'SF12_MH':
                case 'SF12_PH':
                case 'SF12_MHM':
                    records[I].vm_readonly[field]=true;
                break;
            }
    _default_cell_render(records,I,field,td,set_value,source);
        }
        //-------------------------------------
        _before_submit=function(record,dbv){
/*            record.SF12_PF=((((parseFloat(record.SF12_3)+parseFloat(record.SF12_4)+parseFloat(record.SF12_5)+parseFloat(record.SF12_6)+parseFloat(record.SF12_7)+parseFloat(record.SF12_8)+parseFloat(record.SF12_9)+parseFloat(record.SF12_10)+parseFloat(record.SF12_11)+parseFloat(record.SF12_12))-10)/20)*100).toFixed(0);
            record.SF12_PRF=((((parseFloat(record.SF12_13)+parseFloat(record.SF12_14)+parseFloat(record.SF12_15)+parseFloat(record.SF12_16))-4)/4)*100).toFixed(0);
            var bp=0;
            if(parseFloat(record.SF12_21)==1) bp=6.0;
            if(parseFloat(record.SF12_21)==2) bp=5.4;
            if(parseFloat(record.SF12_21)==3) bp=4.2;
            if(parseFloat(record.SF12_21)==4) bp=3.1;
            if(parseFloat(record.SF12_21)==5) bp=2.2;
            if(parseFloat(record.SF12_21)==6) bp=1.0;
            if(parseFloat(record.SF12_22)==1 & parseFloat(record.SF12_21) == 1) bp+=6.0;
            if(parseFloat(record.SF12_22)==1 & parseFloat(record.SF12_21)!= 1) bp+=5.0;
            if(parseFloat(record.SF12_22)==2) bp+=4;
            if(parseFloat(record.SF12_22)==3) bp+=3;
            if(parseFloat(record.SF12_22)==4) bp+=2;
            if(parseFloat(record.SF12_22)==5) bp+=1;
            bp=((bp-2)/10)*100;
            record.SF12_BP=bp.toFixed(0);
            var gh=0;
            if(parseFloat(record.SF12_1)==1) gh=5.0;
            if(parseFloat(record.SF12_1)==2) gh=4.4;
            if(parseFloat(record.SF12_1)==3) gh=3.4;
            if(parseFloat(record.SF12_1)==4) gh=2.0;
            if(parseFloat(record.SF12_1)==5) gh=1.0;
            gh+=parseFloat(record.SF12_33)+parseFloat(record.SF12_35);
            if(parseFloat(record.SF12_34)==1) gh+=5.0;
            if(parseFloat(record.SF12_34)==2) gh+=4.0;
            if(parseFloat(record.SF12_34)==3) gh+=3.0;
            if(parseFloat(record.SF12_34)==4) gh+=2.0;
            if(parseFloat(record.SF12_34)==5) gh+=1.0;
            if(parseFloat(record.SF12_36)==1) gh+=5.0;
            if(parseFloat(record.SF12_36)==2) gh+=4.0;
            if(parseFloat(record.SF12_36)==3) gh+=3.0;
            if(parseFloat(record.SF12_36)==4) gh+=2.0;
            if(parseFloat(record.SF12_36)==5) gh+=1.0;
            gh=((gh-5)/20)*100;
            record.SF12_GHP=gh.toFixed(0);
            var VI=0;
            if(parseFloat(record.SF12_23)==1) VI=6.0;
            if(parseFloat(record.SF12_23)==2) VI=5.0;
            if(parseFloat(record.SF12_23)==3) VI=4.0;
            if(parseFloat(record.SF12_23)==4) VI=3.0;
            if(parseFloat(record.SF12_23)==5) VI=2.0;
            if(parseFloat(record.SF12_23)==6) VI=1.0;
            if(parseFloat(record.SF12_27)==1) VI+=6.0;
            if(parseFloat(record.SF12_27)==2) VI+=5.0;
            if(parseFloat(record.SF12_27)==3) VI+=4.0;
            if(parseFloat(record.SF12_27)==4) VI+=3.0;
            if(parseFloat(record.SF12_27)==5) VI+=2.0;
            if(parseFloat(record.SF12_27)==6) VI+=1.0;
            VI+=parseFloat(record.SF12_29)+parseFloat(record.SF12_31);
            VI=((VI-4)/20)*100;
            record.SF12_VI=VI.toFixed(0);
            var SF=0;
            if(parseFloat(record.SF12_20)==1) SF=5.0;
            if(parseFloat(record.SF12_20)==2) SF=4.0;
            if(parseFloat(record.SF12_20)==3) SF=3.0;
            if(parseFloat(record.SF12_20)==4) SF=2.0;
            if(parseFloat(record.SF12_20)==5) SF=1.0;
            SF = SF + parseFloat(record.SF12_32);
            SF=((SF-2)/8)*100;
            record.SF12_SRF=SF.toFixed(0);
            record.SF12_ERF=((((parseFloat(record.SF12_17)+ parseFloat(record.SF12_18)+parseFloat(record.SF12_19))-3)/3)*100).toFixed(0);
            var MH=0;
            if(parseFloat(record.SF12_26)==1) MH=6.0;
            if(parseFloat(record.SF12_26)==2) MH=5.0;
            if(parseFloat(record.SF12_26)==3) MH=4.0;
            if(parseFloat(record.SF12_26)==4) MH=3.0;
            if(parseFloat(record.SF12_26)==5) MH=2.0;
            if(parseFloat(record.SF12_26)==6) MH=1.0;
            if(parseFloat(record.SF12_30)==1) MH+=6.0;
            if(parseFloat(record.SF12_30)==2) MH+=5.0;
            if(parseFloat(record.SF12_30)==3) MH+=4.0;
            if(parseFloat(record.SF12_30)==4) MH+=3.0;
            if(parseFloat(record.SF12_30)==5) MH+=2.0;
            if(parseFloat(record.SF12_30)==6) MH+=1.0;
            MH+=parseFloat(record.SF12_24)+parseFloat(record.SF12_25)+parseFloat(record.SF12_28);
            MH=((MH-5)/25)*100;
            record.SF12_MH=MH.toFixed(0);
            record.SF12_PH=((parseFloat(record.SF12_PF)+ parseFloat(record.SF12_PRF)+parseFloat(record.SF12_BP)+parseFloat(record.SF12_GHP)+parseFloat(record.SF12_VI))/5).toFixed(0);
            record.SF12_MHM=((parseFloat(record.SF12_SRF)+parseFloat(record.SF12_ERF)+parseFloat(record.SF12_MH))/3).toFixed(0);
            return _set_status_and_participant(record,dbv);
        }
        */
    }
}
</script>
<style>
    VmInclude:__COMPONENT__/grid/grid.v3.css
    ul.ui-autocomplete.ui-menu{font-size:12px}
    .ui-autocomplete li:hover{
        color:White;
        background:#96B202;
        font-weight:normal;
        outline:none;
    }
</style>
